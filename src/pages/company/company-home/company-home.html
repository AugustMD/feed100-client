<!--
  Generated template for the CompanyHomePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="tabs-header">
    <ion-navbar hideBackButton="true">
      <ion-buttons start>
        <button class="badge-button-wrapper" ion-button clear (click)="openCompanyAlarmPage()">
          <ion-icon name="notifications">
            <ion-badge class="badge-button-wrapper-badge" color="danger" *ngIf="getAlarmNum()>0">{{getAlarmNum()}}</ion-badge>
          </ion-icon>
        </button>
      </ion-buttons>
      <ion-title>
          <img src="assets/img/logo-flat.png" />
        </ion-title>
      <ion-buttons end>
        <button ion-button (click)="openCompanyConfigurePage()">
          <ion-icon name="settings"></ion-icon>
        </button>
      </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content class="outer-content">
  <ion-refresher padding-top (ionRefresh)="doRefresh($event)" pullMin="150" pullMax="500">
      <ion-refresher-content>
      </ion-refresher-content>
  </ion-refresher>      
  <ion-slides class="feed100-intro-slides" pager scroll="true" autoplay="3000" effect="fade" speed="500">
    <ion-slide *ngFor="let feed100IntroSlide of feed100IntroSlides" tappable (click)="openPageWrapper(feed100IntroSlide.link)">
      <div>
        <img class="feed100-intro-slide-bg" [src]="feed100IntroSlide.bg" />
        <div class="feed100-intro-slide-wrapper">
          <span>
            <h5 [innerHTML]="feed100IntroSlide.title"></h5>
            <p [innerHTML]="feed100IntroSlide.content"></p>
          </span>
        </div>
      </div>
    </ion-slide>
  </ion-slides>

  <div class="home-group-title">
    진행중인 프로젝트
  </div>
  <div text-center *ngIf = "!proceedingProjects.length" class="empty-inner">
    <p>진행중인 프로젝트가 없습니다!</p>
    <button ion-button clear (click)="openCompanyProjectRegistrationPage()">프로젝트 등록하기 ></button>
  </div>
  <ion-slides *ngIf = "proceedingProjects.length" pager=false loop="false" spaceBetween="-23">
    <ion-slide *ngFor="let proceedingProject of proceedingProjects">
      <div tappable class="project-card card-div" (click)="accessProjectCard(proceedingProject.project_id)">
        <div class="project-card-main-image-wrapper">
          <img [src]="proceedingProject.project_main_image" />
          <div class="project-card-overlay-wrapper">
            <span class="project-card-overlay">
              <span class="project-card-overlay-item e-card-tag" *ngIf="((proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) == '종료') && (proceedingProject.is_my_project)">종&ensp;료</span>
              <span class="project-card-overlay-item p-card-tag" *ngIf="((proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) != '종료') && (proceedingProject.is_my_project)">진&ensp;행</span>
            </span>
          </div>
          <div class="project-card-overlay-wrapper card-overlay-bottom"></div>
        </div>
        <div text-left class="card-content">
          <p class="project-card-summary"><b class="project-card-name">{{proceedingProject.project_name}}</b><br><br>{{proceedingProject.project_summary}}</p>
          <progress-bar *ngIf="((proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) != '종료')" [progress]="proceedingProject.participant_num | divide : proceedingProject.max_participant_num"></progress-bar>
          <progress-bar *ngIf="((proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) == '종료')" progress="100" class="dark-progress-bar"></progress-bar>
          <div *ngIf="(proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) != '종료'" class="project-state-wrapper">
            <span class="project-state-icon">
              <img src="assets/img/calendar.png" />
            </span>
            <span class="project-state-content">
              {{proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState}}
            </span>
            <span margin-left class="project-state-icon">
              <img src="assets/img/people.png" />
            </span>
            <span class="project-state-content">
              <b *ngIf="(proceedingProject.max_participant_num - proceedingProject.participant_num) == 0">FULL</b>
              <b *ngIf="(proceedingProject.max_participant_num - proceedingProject.participant_num) != 0">{{proceedingProject.max_participant_num - proceedingProject.participant_num}}명 참여 가능</b>
            </span>
          </div>
          <div *ngIf="(proceedingProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) == '종료'" class="project-state-wrapper">
            <span class="project-state-content">
              <b class="end-text">프로젝트가 종료되었습니다.</b>
            </span>
          </div>
        </div>
      </div>
    </ion-slide>
  </ion-slides>

  <div class="home-group-title">
    새로운 프로젝트
  </div>
  <div text-center *ngIf = "!newProjects.length" class="empty-inner">
    <p>새로운 프로젝트가 없습니다!</p>
  </div>
  <ion-slides *ngIf = "newProjects.length" pager=false loop="false" spaceBetween="-23">
    <ion-slide *ngFor="let newProject of newProjects">
      <div tappable class="project-card card-div" (click)="accessProjectCard(newProject.project_id)">
        <div class="project-card-main-image-wrapper">
          <img [src]="newProject.project_main_image" />
          <div class="project-card-overlay-wrapper">
            <span class="project-card-overlay">
              <span class="project-card-overlay-item e-card-tag" *ngIf="((newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) == '종료') && (newProject.is_my_project)">종&ensp;료</span>
              <span class="project-card-overlay-item p-card-tag" *ngIf="((newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) != '종료') && (newProject.is_my_project)">진&ensp;행</span>
            </span>
          </div>
          <div class="project-card-overlay-wrapper card-overlay-bottom"></div>
        </div>
        <div text-left class="card-content">
          <p class="project-card-summary"><b class="project-card-name">{{newProject.project_name}}</b><br><br>{{newProject.project_summary}}</p>
          <progress-bar *ngIf="((newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) != '종료')" [progress]="newProject.participant_num | divide : newProject.max_participant_num"></progress-bar>
          <progress-bar *ngIf="((newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) == '종료')" progress="100" class="dark-progress-bar"></progress-bar>
          <div *ngIf="(newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) != '종료'" class="project-state-wrapper">
            <span class="project-state-icon">
              <img src="assets/img/calendar.png" />
            </span>
            <span class="project-state-content">
              {{newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState}}
            </span>
            <span margin-left class="project-state-icon">
              <img src="assets/img/people.png" />
            </span>
            <span class="project-state-content">
              <b *ngIf="(newProject.max_participant_num - newProject.participant_num) == 0">FULL</b>
              <b *ngIf="(newProject.max_participant_num - newProject.participant_num) != 0">{{newProject.max_participant_num - newProject.participant_num}}명 참여 가능</b>
            </span>
          </div>
          <div *ngIf="(newProject.project_end_date | amLocale:'ko' | amTimeAgo | progressState) == '종료'" class="project-state-wrapper">
            <span class="project-state-content">
              <b class="end-text">프로젝트가 종료되었습니다.</b>
            </span>
          </div>
        </div>
      </div>
    </ion-slide>
  </ion-slides>
  
  <div class="home-group-title">
    새로운 뉴스피드
  </div>
  <div text-center *ngIf = "!newNewsfeeds.length" class="empty-inner">
    <p>새로운 뉴스피드가 없습니다!</p>
  </div>
  <ion-slides class="m-16" *ngIf = "newNewsfeeds.length" pager=false loop="false" spaceBetween="-23" slidesPerView="2">
    <ion-slide *ngFor="let newNewsfeed of newNewsfeeds">
      <div tappable class="newsfeed-card" (click)="openCompanyNewsfeedStoryPage(newNewsfeed.newsfeed_id)">
        <img [src]="newNewsfeed.newsfeed_main_image" />
        <div class="card-content" text-left>
            {{newNewsfeed.newsfeed_name}}
        </div>
      </div>
    </ion-slide>
  </ion-slides>


</ion-content>
