<!--
  Generated template for the UserProjectFilterResultPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->



<ion-content #contentRef (ionScroll)="scrollingFun($event)">
  <ion-header>

    <ion-navbar hideBackButton="true">
      <ion-buttons start>
        <button class="back-and-close-button" ion-button (click)="dismiss()" icon-only>
          <ion-icon name="close"></ion-icon>              
        </button>
      </ion-buttons>
    </ion-navbar>

  </ion-header>
  <div class="filter-wrapper">
    <div class="active-button-wrapper">
      <ion-buttons>
        <button ion-button clear class="inactive-all all-button" *ngIf="filters.length" (click)="activeAllFilter()">All</button>
        <button ion-button clear class="active-all all-button" *ngIf="!filters.length">All</button>
        <button color="light" *ngFor="let filterResult of filterResults" ion-button class="active-button" (click)="inactiveFilter(filterResult)">
          #{{filterResult.option}} <ion-icon name="close-circle"></ion-icon>
        </button>
      </ion-buttons>
    </div>
    <div class="inactive-button-wrapper" *ngIf="filters.length">
      <ion-buttons>
        <button *ngFor="let filter of filters" ion-button clear class="inactive-button" (click)="activeFilter(filter)">
          #{{filter.option}}
        </button>
      </ion-buttons>
    </div>
    <div class="shadow-top"></div>
  </div>
  <div class="filter-result-content outer-content">
    <ion-card class="feedback-card" *ngFor="let feedbackResult of feedbackResults"> 
      <ion-card-header>
        <ion-item class="avatar-span-wrapper item-flex">
          <span item-start class="avatar-image avatar-span">
            <div class="avatar-span-image" [style.backgroundImage]="'url(' + feedbackResult.avatarImage + ')'"></div>
          </span>
          <h3>
            <span class="best-badge" *ngIf="feedbackResult.isBest">
              <span>BEST</span>
            </span>{{feedbackResult.nickname}}
            <span float-right class="empathy-wrapper">
              <span><span class="text-empathy">공감</span> {{feedbackResult.empathyNum}}</span>
              <span><span class="text-nonempathy">비공감</span> {{feedbackResult.nonEmpathyNum}}</span>
            </span>
          </h3>
          <p [innerHTML]="feedbackResult.feedbackRegistrationDate"></p>
        </ion-item>
      </ion-card-header>
      <ion-card-content class="feedback-content">
        <div tappable (click)="openUserProjectFeedbackPage()">
          {{feedbackResult.feedbackContent | slice:0:100}}
          <span class="slice-tag" *ngIf="feedbackResult.feedbackContent.length > 100"> ...</span>
          <div class="feedback-more-button">피드백 자세히 보러가기 ></div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

</ion-content>
