<!--
  Generated template for the UserProjectSearchResultPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar hideBackButton="true">
      <ion-buttons start>
        <button ion-button (click)="back()" icon-only>
          <ion-icon name="ios-arrow-back"></ion-icon>              
        </button>
      </ion-buttons>
      
        <div class="active-button-wrapper hashtags-chooser-wraaper">
          <ion-buttons>
            <button clear *ngIf="searchResults.length == 0" ion-button class="inactive-button">필터를 등록해주세요.</button>
            <button color="light" *ngFor="let searchResult of searchResults" ion-button class="active-button" (click)="inactiveHashtag(searchResult)">
              #{{searchResult}} <ion-icon name="close-circle"></ion-icon>
            </button>
          </ion-buttons>
        </div>
      
      
    </ion-navbar>

  </ion-header>
<ion-content #contentRef>
  <ion-refresher padding-top (ionRefresh)="doRefresh($event)" pullMin="150" pullMax="500">
    <ion-refresher-content>
    </ion-refresher-content>
  </ion-refresher>        
  <div class="search-wrapper">
    <div class="inactive-button-wrapper hashtags-chooser-wraaper" *ngIf="projectHashtags.length > 0">
      <ion-buttons>
        <button ion-button clear class="inactive-all all-button" (click)="activeAllHashtag()">ALL</button>
        <button *ngFor="let projectHashtag of projectHashtags" ion-button clear class="inactive-button" (click)="activeHashtag(projectHashtag)">
          #{{projectHashtag}}
        </button>
      </ion-buttons>
    </div>
    <div class="shadow-top"></div>
  </div>
  <div class="search-result-content-wrapper">
    <div class="empty-content content-absolute" *ngIf="feedbackResults.length == 0">
      <span class="dark-text under-icon">검색 결과가 없습니다.</span>
    </div>
    <div class="search-result-content outer-content" *ngIf="feedbackResults.length > 0">
      <ion-card class="feedback-card" *ngFor="let feedbackResult of feedbackResults"> 
        <ion-card-header>
          <ion-item class="avatar-span-wrapper item-flex">
            <span item-start class="avatar-image avatar-span cropper">
              <img class="avatar-span-image" [src]="feedbackResult.avatar_image" />
            </span>
            <h3>
              <span class="best-badge" *ngIf="feedbackResult.is_best">
                <span>BEST</span>
              </span>{{feedbackResult.nickname}}
              <span float-right class="empathy-wrapper">
                <span><span class="text-empathy">공감</span> {{feedbackResult.empathy_num}}</span>
                <span><span class="text-nonempathy">비공감</span> {{feedbackResult.non_empathy_num}}</span>
              </span>
            </h3>
            <p [innerHTML]="feedbackResult.project_feedback_registration_date | amLocale:'ko' | amTimeAgo"></p>
          </ion-item>
        </ion-card-header>
        <ion-card-content class="feedback-content">
          <div class="feedback-summary" tappable (click)="openUserProjectFeedbackPage(feedbackResult.project_participant_id)">
            {{(feedbackResult.project_feedback | jsonParse)[0] | slicetext:100 | replaceBrTag}}
            <!-- <span class="slice-tag" *ngIf="(feedbackResult.project_feedback | jsonParse)[0].length > 100"> ...</span> -->
            <div class="feedback-more-button">피드백 자세히 보러가기 ></div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>

</ion-content>